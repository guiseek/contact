<contact-toolbar>
  <a
    mat-icon-button
    class="toolbar-icon"
    matTooltip="Conta de usuário"
    routerLink="/user"
  >
    <mat-icon>account_circle</mat-icon>
  </a>

  <button
    mat-icon-button
    class="toolbar-icon favorite-icon"
    aria-label="Example icon-button with heart icon"
  >
    <mat-icon>favorite</mat-icon>
  </button>

  <button
    mat-icon-button
    mediaQuery
    min="lg"
    class="toolbar-icon"
    aria-label="Example icon-button with share icon"
  >
    <mat-icon>share</mat-icon>
  </button>
</contact-toolbar>

<main>
  <form [formGroup]="form">
    <mat-card formGroupName="audio">
      <mat-card-header>
        <mat-icon mat-card-avatar>settings_voice</mat-icon>
        <mat-card-title>Microfones</mat-card-title>
        <mat-card-subtitle>
          Dispositivos para entrada de áudio
        </mat-card-subtitle>
        <mat-icon
          mat-card-image
          matTooltip="Organize a lista de microfones por ordem de prioridade para frequência de uso, onde o primeiro da lista é o mais utilizado"
        >
          help_outline
        </mat-icon>
      </mat-card-header>

      <contact-devices
        #audioDevices="contactDevices"
        formControlName="devices"
      ></contact-devices>

      <mat-card-actions *ngIf="audioDevices.firstSelectedDevice as device">
        <contact-audio-input
          [constraints]="{deviceId: device.deviceId}"
        ></contact-audio-input>
      </mat-card-actions>
    </mat-card>
    <ng-container formGroupName="video">
      <mat-card>
        <mat-card-header>
          <mat-icon mat-card-avatar>video_settings</mat-icon>
          <mat-card-title>Câmeras</mat-card-title>
          <mat-card-subtitle
            >Dispositivos para entrada de vídeo</mat-card-subtitle
          >
        </mat-card-header>

        <contact-devices
          #videoDevices="contactDevices"
          kind="videoinput"
          (valueChange)="onVideoDevicesChange($event)"
          formControlName="devices"
        ></contact-devices>

        <ng-container *ngIf="videoDevices.firstSelectedDevice as device">
          <mat-card-header>
            <mat-card-subtitle>
              <mat-icon>check</mat-icon> {{ device.label }}
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-actions>
            <contact-video-input
              (capabilitiesChange)="onVideoCapabilities($event)"
              [constraints]="{deviceId: device.deviceId}"
            ></contact-video-input>
          </mat-card-actions>
        </ng-container>
      </mat-card>
      <mat-card>
        <contact-resolutions
          [range]="videoRange$ | async"
          formControlName="resolution"
        >
        </contact-resolutions>
      </mat-card>
    </ng-container>
  </form>

  <button type="button" mat-button (click)="openSettings()">Settings</button>
</main>

<!-- <canvas [contactVolumeter]="mediaStream$ | async" [enabled]="true"></canvas> -->
